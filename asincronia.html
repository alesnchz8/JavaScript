<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>PROGRAMACION ASINCRONA EN JAVASCRIPT</title>
  </head>
  <body>
    <script>
      //44.- ***** SETTIMEOUT() && SETINTERVAL() *****
      // console.log("inicio");
      // setTimeout(()=>{
      //     console.log("esto es un setTimeout");
      // },2000);
      // setInterval(()=>{
      //     //console.log("esto es un setInterval");
      //     console.log(new Date().toLocaleString());
      // },1000);
      // //clearInterval();

      //45.-***** ASINCRONIA Y EL EVENT LOOP *****
      //antes de explicar como funciona el modelo de JavaScript es importante entender algunos conceptos

      //Procesamiento Single thread y Multi thread.
      //Operaciones de CPU Y Operaciones de I/O.
      //Operaciones Concurrentes y Paralelas.
      //Operaciones Bloqeantes y No Bloqueantes.
      //Operaciones Sincronas y Asincronas.

      //JavaScript usa un modelo asincrono y no bloqueante con un loop de eventos implementado en un solo
      //hilo (single thread) para operaciones de entrada y salida (Input\Out).

      //CODIGO SINCRONO BLOQUEANTE
      //     (()=>{
      //     console.log("CODIGO SINCRONO");
      //     console.log("Inicio");

      //     function dos(){
      //         console.log("Dos");
      //     }
      //     function uno(){
      //         console.log("Uno");
      //         dos();
      //         console.log("Tres");
      //     }
      //     uno();
      //     console.log("fin");
      // })();
      //CODIGO ASINCRONO NO BLOQUEANTE
      // (()=>{
      //     console.log("Codigo Asincrono");
      //     console.log("inicio");

      //     function dos(){
      //         setTimeout(function(){
      //             console.log("dos");
      //         },1000);
      //     }

      //     function uno(){
      //         setTimeout(function(){
      //             console.log("uno");
      //         },0);
      //         dos();
      //         console.log("tres");
      //     }
      //     uno();
      //     console.log("fin");
      // })();

      //46. ***** CALLBACKS *****
    //   function cuadradoCallback(value, callback) {
    //     setTimeout(() => {
    //       callback(value, value * value);
    //     }, 0 | (Math.random() * 1000));
    //   }
    //   cuadradoCallback(0, (value, result) => {
    //     console.log("inicia callback");
    //     console.log(`Callback: ${value},${result}`);
    //     cuadradoCallback(1, (value, result) => {
    //       console.log(`Callback: ${value},${result}`);
    //       cuadradoCallback(2, (value, result) => {
    //         console.log(`Callback: ${value},${result}`);
    //         cuadradoCallback(3, (value, result) => {
    //           console.log(`Callback: ${value},${result}`);
    //           cuadradoCallback(5, (value, result) => {
    //             console.log(`Callback: ${value},${result}`);
    //             console.log("finde las collbacks");
    //             console.log("callback hell");
    //           });
    //         });
    //       });
    //     });
    //   });
//47.- ***** PROMESAS *****
    // function cuadradoPromise(value){
    //     if(typeof value !== "number"){
    //         return Promise.reject(`Error, el valor "${value}" ingresado no es un numero`);
    //     }
    //     return new Promise((resolve,reject)=>{
    //         setTimeout(()=>{
    //             resolve({
    //                 value,
    //                 result: value*value
    //             });
    //         },0|Math.random()*1000);
    //     });
    // }
    // cuadradoPromise(0)
    //  .then(obj=>{
    //      console.log(`promise: ${obj.value}, ${obj.result}`);
    //      return cuadradoPromise(0);
    //  })
    //  .then(obj=>{
    //      console.log(`promise: ${obj.value}, ${obj.result}`);
    //      return cuadradoPromise(1);
    //  })
    //  .then(obj=>{
    //      console.log(`promise: ${obj.value}, ${obj.result}`);
    //      return cuadradoPromise(2);
    //  })
    //  .then(obj=>{
    //      console.log(`promise: ${obj.value}, ${obj.result}`);
    //      return cuadradoPromise(3);
    //  })
    //  .then(obj=>{
    //      console.log(`promise: ${obj.value}, ${obj.result}`);
    //      return cuadradoPromise(4);
    //      console.log("Fin Promise");
    //  })
    //  .catch(err => console.error(err));

// 48. ***** ASYNC - AWAIT *****
        // function cuadradoPromise(value){
        //     if(typeof value !== "number"){
        //         return Promise.reject(`Error, el valor "${value}" ingresado no es un numero`);
        //     }
        //     return new Promise((resolve,reject)=>{
        //         setTimeout(()=>{
        //             resolve({
        //                 value,
        //                 result: value*value
        //             });
        //         },0|Math.random()*1000);
        //     });
        // }

        // async function funcionAsincronaDeclarada(){
        //     try{
        //         console.log("Inicio Async Function");

        //         let obj = await cuadradoPromise(0);
        //         console.log(`Asyc Function ${obj.value},${obj.result}`);
        //         obj = await cuadradoPromise(1);
        //         console.log(`Asyc Function ${obj.value},${obj.result}`);
        //         obj = await cuadradoPromise(2);
        //         console.log(`Asyc Function ${obj.value},${obj.result}`);
        //         obj = await cuadradoPromise(3);
        //         console.log(`Asyc Function ${obj.value},${obj.result}`);
        //         obj = await cuadradoPromise(4);
        //         console.log(`Asyc Function ${obj.value},${obj.result}`);
        //         obj = await cuadradoPromise(5);
        //         console.log(`Asyc Function ${obj.value},${obj.result}`);

        //     }catch(err){
        //         console.error(err);
        //     }
        // }
        // const funcionAsincronaExpresada = async()=>{
        //     try{
        //         console.log("Inicio Async Function");
        //         let obj = await cuadradoPromise(6);
        //         console.log(`Asyc Function ${obj.value},${obj.result}`);
        //         obj = await cuadradoPromise(7);
        //         console.log(`Asyc Function ${obj.value},${obj.result}`);
        //         obj = await cuadradoPromise(8);
        //         console.log(`Asyc Function ${obj.value},${obj.result}`);
        //         obj = await cuadradoPromise(9);
        //         console.log(`Asyc Function ${obj.value},${obj.result}`);
        //         obj = await cuadradoPromise(10);
        //         console.log(`Asyc Function ${obj.value},${obj.result}`);
        //     }catch(err){
        //         console.error(err);
        //     }
        // }
        // funcionAsincronaDeclarada();
        // funcionAsincronaExpresada();
    </script>
  </body>
</html>
